(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fedcc6c"],{"0d03":function(e,t,n){var i=n("6eeb"),o=Date.prototype,s="Invalid Date",r="toString",a=o[r],c=o.getTime;new Date(NaN)+""!=s&&i(o,r,(function(){var e=c.call(this);return e===e?a.call(this):s}))},"2d52":function(e,t,n){},"2e7b":function(e,t,n){"use strict";var i=n("3e23"),o=n.n(i);o.a},"3e23":function(e,t,n){},"4d38":function(e,t,n){e.exports=n.p+"img/speaker.46efd460.svg"},"6eba":function(e,t,n){var i=n("23e7");i({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},"7a82":function(e,t,n){var i=n("23e7"),o=n("83ab"),s=n("9bf2");i({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:s.f})},8363:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play"},[n("NewMessage",{attrs:{name:e.name}}),e._l(e.messages,(function(t){return n("li",{key:t.id},[n("span",[e._v(e._s(t.name))]),n("span",[e._v(e._s(t.content))]),n("span",[e._v(e._s(t.timestamp))])])})),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.controlsEnabled,expression:"!controlsEnabled"}],ref:"blocker",attrs:{id:"blocker"}},[n("div",{ref:"instructions",attrs:{id:"instructions"},on:{click:e.clickOnInstructions}},[n("span",{staticStyle:{"font-size":"40px"}},[e._v("Click to play "+e._s(this.name)+" ")]),n("br"),e._v(" (W, A, S, D = Move, SPACE = Jump, MOUSE = Look aroundt) ")])])]),n("div",{staticClass:"controls"},[n("button",{on:{click:function(t){return e.movePosition(5,5,0)}}},[e._v("Move a")]),n("button",{on:{click:function(t){return e.movePosition(5,15,0)}}},[e._v("Move b")]),n("button",{on:{click:function(t){return e.movePosition(15,5,0)}}},[e._v("Move c")])]),n("div",{ref:"canvas",staticClass:"container"},[e._m(0)])],2)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"left-down"},[i("div",{staticClass:"map"},[i("img",{attrs:{src:n("c9eb"),alt:"Facebook_WeProvide"}})])]),i("div",{staticClass:"right-down"},[i("div",{staticClass:"fullscreen"},[i("img",{attrs:{src:n("c9eb"),alt:"Facebook_WeProvide"}})]),i("div",{staticClass:"sound"},[i("img",{attrs:{src:n("4d38"),alt:"Sound"}})])]),i("div",{staticClass:"center-down"},[i("div",{staticClass:"mouse m-1"})]),i("div",{staticClass:"top-right"},[i("div",{staticClass:"lock"},[i("img",{attrs:{src:n("ad78"),alt:"Lock"}})])]),i("div",{staticClass:"center"},[i("div",{staticClass:"marker"})])])}],s=(n("4160"),n("b0c0"),n("159b"),n("5a89")),r=n("83a1"),a=n.n(r);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n("7a82");function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t,n,i){c(this,e),this.geometry=new s["BoxGeometry"](t,n,i),this.setVertexColors()}return d(e,[{key:"setVertexColors",value:function(){for(var e=0,t=this.geometry.faces.length;e<t;e++){var n=this.geometry.faces[e];n.vertexColors[0]=this.vertexColor(),n.vertexColors[1]=this.vertexColor(),n.vertexColors[2]=this.vertexColor()}return this}},{key:"vertexColor",value:function(){return(new s["Color"]).setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75)}},{key:"setMaterial",value:function(){return this.material=new s["MeshPhongMaterial"]({specular:16777215,flatShading:s["FlatShading"],vertexColors:s["VertexColors"]}),this.material.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75),this}},{key:"setMesh",value:function(){return this.mesh=new s["Mesh"](this.geometry,this.material),this}},{key:"setPosition",value:function(e,t,n){return this.mesh.position.x=e,this.mesh.position.y=t,this.mesh.position.z=n,this}},{key:"create",value:function(){return this.setMaterial(),this.setMesh(),this}}]),e}(),u=n("34ad"),m=(n("3191"),n("a5cf")),v=n("4476"),f=n("9ce6"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"new-message"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.addMessage(t)}}},[n("label",{attrs:{for:"new-message"}},[e._v("New Message (enter to add):")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",name:"new-message"},domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e.feedback?n("p",[e._v(e._s(e.feedback))]):e._e()])])},b=[],w=(n("6eba"),n("0d03"),n("032d")),g={name:"NewMessage",props:["name"],data:function(){return{newMessage:null,yak:null,feedback:null}},methods:{addMessage:function(){this.newMessage?w["a"].collection("messages").add({content:this.newMessage,name:this.name,timestamp:Date.now(),yak:this.yak})["catch"]((function(e){console.log(e)})):this.feedback="You must enter a message in order to send one"}}},k=g,C=(n("9ab9"),n("2877")),x=Object(C["a"])(k,p,b,!1,null,"7981b908",null),E=x.exports,L=n("c1df"),M=n.n(L);n("facd");v["a"].registerPlugin(f["a"]);var z={name:"Play",props:["name"],components:{NewMessage:E},data:function(){return{messages:[],element:void 0,camera:void 0,scene:void 0,box:void 0,renderer:void 0,controls:void 0,objects:[],raycaster:void 0,blocker:void 0,instructions:void 0,havePointerLock:void 0,intersects:[],moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,canJump:!1,sprinting:!1,moveY:0,prevTime:void 0,velocity:void 0}},created:function(){var e=this,t=w["a"].collection("messages").orderBy("timestamp");t.onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"==t.type){var n=t.doc;e.messages.push({id:n.id,name:n.data().name,content:n.data().content,timestamp:M()(n.data().timestamp).format("ll")})}}))}))},methods:{init:function(){this.camera=new s["PerspectiveCamera"](90,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,30,0),console.log(this.camera.position),this.scene=new s["Scene"],this.scene.fog=new s["Fog"](16777215,0,750);var e=new s["HemisphereLight"](15658751,7829384,.75);e.position.set(.5,1,.75),this.scene.add(e),this.controls=new a.a(this.camera),this.scene.add(this.controls.getObject()),document.addEventListener("wheel",this.onScrollWheel,!1),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1),this.raycaster=new s["Raycaster"](new s["Vector3"],new s["Vector3"](0,-1,0),0,10),this.initCreateGround(),this.initCreateHouse(),this.initCube(),this.initRenderer(),window.addEventListener("resize",this.onWindowResize,!1)},initRenderer:function(){this.renderer=new s["WebGLRenderer"],this.renderer.gammaOutput=!0,this.renderer.gammaFactor=2.2,this.renderer.setClearColor(1381653),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.element.appendChild(this.renderer.domElement)},initCreateGround:function(){var e=this,t=new u["a"];t.load("/blender/grond.glb",(function(t){e.scene.add(t.scene),t.scene.position.set(0,0,-100),t.scene.scale.set(10,10,10)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))},initCreateHouse:function(){var e=this,t=new u["a"];t.load("/blender/room.glb",(function(t){e.scene.add(t.scene),t.scene.position.set(0,15,0),t.scene.scale.set(8,8,8)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))},initCube:function(){var e=this.scene.getObjectByName("Cube");e=new h(20,20,20).create().setPosition(10,10,10);var t=e.mesh;this.scene.add(t),this.objects.push(t)},animate:function(){if(requestAnimationFrame(this.animate),this.controlsEnabled){var e=performance.now(),t=(e-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*t,this.velocity.z-=10*this.velocity.z*t,this.velocity.y-=9.8*100*t,this.handleInput(t),this.controls.getObject().position.y<10&&(this.velocity.y=0,this.controls.getObject().position.y=10,this.canJump=!0),this.prevTime=e}this.renderer.render(this.scene,this.camera)},handleInput:function(e){this.velocity.z+=10*this.moveY*e,this.controls.getObject().position.z+=this.velocity.z*e,this.moveY=0},movePosition:function(e,t,n){this.controls.getObject().position.x=e,this.controls.getObject().position.y=t,this.controls.getObject().position.z=n},onKeyDown:function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 32:!0===this.canJump&&(this.velocity.y+=350),this.canJump=!1;break;case 16:this.sprinting=!0;break}},onKeyUp:function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 16:this.sprinting=!1;break}},onScrollWheel:function(e){var t=e.deltaY;t>0&&(this.moveY=1),t<0&&(this.moveY=-1),this.moveY=t},isOnObject:function(){this.raycaster.ray.origin.copy(this.controls.getObject().position),this.raycaster.ray.origin.y-=10;var e=this.raycaster.intersectObjects(this.objects);return e.length>0},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},pointerlockchange:function(){document.pointerLockElement===this.element||document.mozPointerLockElement===this.element||document.webkitPointerLockElement===this.element?this.controls.enabled=!0:this.controls.enabled=!1},pointerlockerror:function(){},clickOnInstructions:function(){this.element.requestPointerLock=this.element.requestPointerLock||this.element.mozRequestPointerLock||this.element.webkitRequestPointerLock,/Firefox/i.test(navigator.userAgent)?(document.addEventListener("fullscreenchange",this.fullscreenchange,!1),document.addEventListener("mozfullscreenchange",this.fullscreenchange,!1),this.element.requestFullscreen=this.element.requestFullscreen||this.element.mozRequestFullscreen||this.element.mozRequestFullScreen||this.element.webkitRequestFullscreen,this.element.requestFullscreen()):this.element.requestPointerLock()},fullscreenchange:function(){document.fullscreenElement!==this.element&&document.mozFullscreenElement!==this.element&&document.mozFullScreenElement!==this.element||(document.removeEventListener("fullscreenchange",this.fullscreenchange),document.removeEventListener("mozfullscreenchange",this.fullscreenchange),this.element.requestPointerLock())}},computed:{controlsEnabled:function(){return void 0!==this.controls&&this.controls.enabled},zInput:function(){var e=0;return e-=this.moveForward?1:0,e+=this.moveBackward?1:0,e},xInput:function(){var e=0;return e-=this.moveLeft?1:0,e+=this.moveRight?1:0,e},moveObjectA:function(){(this.camera.position.z=30)&&(this.controls.getObject().position.y=y)}},mounted:function(){this.element=this.$refs.canvas,this.blocker=this.$refs.blocker,this.instructions=this.$refs.instructions;new m["d"];this.prevTime=performance.now(),this.velocity=new s["Vector3"],"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document?(document.addEventListener("pointerlockchange",this.pointerlockchange,!1),document.addEventListener("mozpointerlockchange",this.pointerlockchange,!1),document.addEventListener("webkitpointerlockchange",this.pointerlockchange,!1),document.addEventListener("pointerlockerror",this.pointerlockerror,!1),document.addEventListener("mozpointerlockerror",this.pointerlockerror,!1),document.addEventListener("webkitpointerlockerror",this.pointerlockerror,!1),this.init(),this.animate()):this.instructions.innerHTML="Your browser doesn't seem to support Pointer Lock API"}},P=z,O=(n("2e7b"),Object(C["a"])(P,i,o,!1,null,"ba4bb658",null));t["default"]=O.exports},"83a1":function(e,t,n){e.exports=function(e){var t=window.THREE||n("5a89"),i=this;e.rotation.set(0,0,0);var o=new t.Object3D;o.add(e);var s=new t.Object3D;s.position.y=10,s.add(o);var r=!1,a=!1,c=!1,l=!1,d=!1,h=!1,u=performance.now(),m=new t.Vector3,v=Math.PI/2,f=function(e){if(!1!==i.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;s.rotation.y-=.002*t,o.rotation.x-=.002*n,o.rotation.x=Math.max(-v,Math.min(v,o.rotation.x))}},p=function(e){switch(e.keyCode){case 38:case 87:r=!0;break;case 37:case 65:c=!0;break;case 40:case 83:a=!0;break;case 39:case 68:l=!0;break;case 32:!0===h&&(m.y+=350),h=!1;break}},b=function(e){switch(e.keyCode){case 38:case 87:r=!1;break;case 37:case 65:c=!1;break;case 40:case 83:a=!1;break;case 39:case 68:l=!1;break}};document.addEventListener("mousemove",f,!1),document.addEventListener("keydown",p,!1),document.addEventListener("keyup",b,!1),this.enabled=!1,this.getObject=function(){return s},this.isOnObject=function(e){d=e,h=e},this.getDirection=function(){var e=new t.Vector3(0,0,-1),n=new t.Euler(0,0,0,"YXZ");return function(t){return n.set(o.rotation.x,s.rotation.y,0),t.copy(e).applyEuler(n),t}}(),this.update=function(){if(!1!==i.enabled){var e=performance.now(),t=(e-u)/1e3;m.x-=10*m.x*t,m.z-=10*m.z*t,m.y-=9.8*100*t,r&&(m.z-=400*t),a&&(m.z+=400*t),c&&(m.x-=400*t),l&&(m.x+=400*t),!0===d&&(m.y=Math.max(0,m.y)),s.translateX(m.x*t),s.translateY(m.y*t),s.translateZ(m.z*t),s.position.y<10&&(m.y=0,s.position.y=10,h=!0),u=e}}}},"9ab9":function(e,t,n){"use strict";var i=n("2d52"),o=n.n(i);o.a},ad78:function(e,t,n){e.exports=n.p+"img/lock.ae7ad660.svg"}}]);
//# sourceMappingURL=chunk-6fedcc6c.287783be.js.map