(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd76c558"],{"0d03":function(e,t,n){var o=n("6eeb"),i=Date.prototype,s="Invalid Date",r="toString",a=i[r],c=i.getTime;new Date(NaN)+""!=s&&o(i,r,(function(){var e=c.call(this);return e===e?a.call(this):s}))},1871:function(e,t,n){"use strict";var o=n("edbb"),i=n.n(o);i.a},"4d38":function(e,t,n){e.exports=n.p+"img/speaker.2b4a77e1.svg"},"6eba":function(e,t,n){var o=n("23e7");o({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},"7a82":function(e,t,n){var o=n("23e7"),i=n("83ab"),s=n("9bf2");o({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:s.f})},"7c8f":function(e,t,n){},8363:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"play"},[o("audio",{ref:"audioElm",attrs:{src:"/blender/music.mp3",autoplay:"",loop:""}}),e._m(0),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.controlsEnabled,expression:"!controlsEnabled"}],ref:"blocker",attrs:{id:"blocker"}},[o("div",{ref:"instructions",attrs:{id:"instructions"}},[o("span",[e._v("Escape Room")]),o("h4",[e._v("Menu")])]),o("div",{staticClass:"wrapper"},[o("div",{staticClass:"map"},[o("div",{staticClass:"btn-gradient"}),o("img",{attrs:{src:n("a6a4"),alt:"Map"}})]),o("div",{staticClass:"fullscreen",on:{click:e.openFullscreen}},[o("div",{staticClass:"btn-gradient"}),o("img",{attrs:{src:n("b43b"),alt:"Fullscreen"}})]),o("div",{staticClass:"sound",on:{click:e.playPause}},[o("div",{staticClass:"btn-gradient"}),o("img",{attrs:{src:n("4d38"),alt:"Sound"}})]),o("div",{staticClass:"lock"},[o("div",{staticClass:"btn-gradient"}),o("img",{attrs:{src:n("ad78"),alt:"Lock"}})])]),o("div",{staticClass:"start-button",on:{click:e.clickOnInstructions}},[o("div",{staticClass:"left-bracket"}),o("div",{staticClass:"start-button-label"},[e._v("CONTINUE")]),o("div",{staticClass:"right-bracket"}),o("div",{staticClass:"button-gradient"})])])]),o("div",{staticClass:"controls"},[o("button",{on:{click:function(t){return e.movePosition(5,5,0)}}},[e._v("Move a")]),o("button",{on:{click:function(t){return e.movePosition(5,15,0)}}},[e._v("Move b")]),o("button",{on:{click:function(t){return e.movePosition(15,5,0)}}},[e._v("Move c")])]),o("div",{ref:"canvas",staticClass:"container"},[e._m(1)])],1)},i=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{attrs:{id:"loading-screen"}},[o("div",{attrs:{id:"loader"}}),o("div",{staticClass:"lock"},[o("img",{attrs:{src:n("c2b0"),alt:"lock"}}),o("h4",[e._v("Loading")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"center"},[n("div",{staticClass:"marker"}),n("div",{staticClass:"center-down"},[n("div",{staticClass:"mouse m-1"})])])}],s=(n("4160"),n("b0c0"),n("159b"),n("5a89")),r=n("83a1"),a=n.n(r);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n("7a82");function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var u=function(){function e(t,n,o){c(this,e),this.geometry=new s["BoxGeometry"](t,n,o),this.setVertexColors()}return d(e,[{key:"setVertexColors",value:function(){for(var e=0,t=this.geometry.faces.length;e<t;e++){var n=this.geometry.faces[e];n.vertexColors[0]=this.vertexColor(),n.vertexColors[1]=this.vertexColor(),n.vertexColors[2]=this.vertexColor()}return this}},{key:"vertexColor",value:function(){return(new s["Color"]).setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75)}},{key:"setMaterial",value:function(){return this.material=new s["MeshPhongMaterial"]({specular:16777215,flatShading:s["FlatShading"],vertexColors:s["VertexColors"]}),this.material.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75),this}},{key:"setMesh",value:function(){return this.mesh=new s["Mesh"](this.geometry,this.material),this}},{key:"setPosition",value:function(e,t,n){return this.mesh.position.x=e,this.mesh.position.y=t,this.mesh.position.z=n,this}},{key:"create",value:function(){return this.setMaterial(),this.setMesh(),this}}]),e}(),m=n("34ad"),h=(n("3191"),n("a5cf")),v=n("4476"),f=n("9ce6"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"new-message"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.addMessage(t)}}},[n("label",{attrs:{for:"new-message"}},[e._v("New Message (enter to add):")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",name:"new-message"},domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e.feedback?n("p",[e._v(e._s(e.feedback))]):e._e()])])},g=[],b=(n("6eba"),n("0d03"),n("032d")),w={name:"NewMessage",props:["name","jobs"],data:function(){return{newMessage:null,feedback:null}},methods:{addMessage:function(){this.newMessage?b["a"].collection("messages").add({content:this.newMessage,name:this.name,jobs:this.jobs,timestamp:Date.now()})["catch"]((function(e){console.log(e)})):this.feedback="You must enter a message in order to send one"}}},k=w,E=(n("1871"),n("2877")),C=Object(E["a"])(k,p,g,!1,null,"239ab25c",null),x=C.exports,L=n("c1df"),M=n.n(L);n("facd");v["a"].registerPlugin(f["a"]);var F={name:"Play",props:["name","jobs"],components:{NewMessage:x},data:function(){return{messages:[],element:void 0,camera:void 0,scene:void 0,box:void 0,renderer:void 0,controls:void 0,objects:[],raycaster:void 0,blocker:void 0,instructions:void 0,havePointerLock:void 0,intersects:[],loadingScreen:void 0,loadingManager:null,elem:null,cube:void 0,track:document.getElementById("track"),controlBtn:document.getElementById("play-pause"),moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,canJump:!1,sprinting:!1,moveY:0,prevTime:void 0,velocity:void 0}},created:function(){var e=this,t=b["a"].collection("messages").orderBy("timestamp");t.onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"==t.type){var n=t.doc;e.messages.push({id:n.id,name:n.data().name,jobs:n.data().jobs,content:n.data().content,timestamp:M()(n.data().timestamp).format("ll")})}}))}))},methods:{init:function(){var e=this;this.camera=new s["PerspectiveCamera"](90,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,30,0),console.log(this.camera.position),this.scene=new s["Scene"],this.scene.fog=new s["Fog"](16777215,0,750);var t=new s["HemisphereLight"](15658751,7829384,.75);t.position.set(.5,1,.75),this.scene.add(t),this.controls=new a.a(this.camera),this.scene.add(this.controls.getObject()),document.addEventListener("wheel",this.onScrollWheel,!1),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1),this.raycaster=new s["Raycaster"](new s["Vector3"],new s["Vector3"](0,-1,0),0,10),this.loadingManager=new s["LoadingManager"]((function(){e.loadingScreen=document.getElementById("loading-screen"),e.loadingScreen.classList.add("fade-out"),e.loadingScreen.addEventListener("transitionend",e.onTransitionEnd)})),this.initCreateGround(),this.initCreateHouse(),this.initCube(),this.initRenderer(),window.addEventListener("resize",this.onWindowResize,!1)},initRenderer:function(){this.renderer=new s["WebGLRenderer"],this.renderer.gammaOutput=!0,this.renderer.gammaFactor=2.2,this.renderer.setClearColor(1381653),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.element.appendChild(this.renderer.domElement)},initCreateGround:function(){var e=this,t=new m["a"](this.loadingManager);t.load("/blender/grond.glb",(function(t){e.scene.add(t.scene),t.scene.position.set(0,0,-100),t.scene.scale.set(10,10,10)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))},initCreateHouse:function(){var e=this,t=new m["a"](this.loadingManager);t.load("/blender/room.glb",(function(t){e.scene.add(t.scene),t.scene.position.set(0,15,0),t.scene.scale.set(8,8,8)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))},initCube:function(){this.cube=this.scene.getObjectByName("Cube"),this.cube=new u(20,20,20).create().setPosition(10,10,10);var e=this.cube.mesh;this.scene.add(e),this.objects.push(e)},animate:function(){if(requestAnimationFrame(this.animate),this.controlsEnabled){var e=performance.now(),t=(e-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*t,this.velocity.z-=10*this.velocity.z*t,this.velocity.y-=9.8*100*t,this.handleInput(t),this.controls.getObject().position.y<10&&(this.velocity.y=0,this.controls.getObject().position.y=10,this.canJump=!0),this.prevTime=e}this.renderer.render(this.scene,this.camera)},onTransitionEnd:function(e){e.target.remove()},handleInput:function(e){this.velocity.z+=10*this.moveY*e,this.controls.getObject().position.z+=this.velocity.z*e,this.moveY=0},movePosition:function(e,t,n){this.controls.getObject().position.x=e,this.controls.getObject().position.y=t,this.controls.getObject().position.z=n},onKeyDown:function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 32:!0===this.canJump&&(this.velocity.y+=350),this.canJump=!1;break;case 16:this.sprinting=!0;break}},onKeyUp:function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 16:this.sprinting=!1;break}},onScrollWheel:function(e){var t=e.deltaY;t>0&&(this.moveY=1),t<0&&(this.moveY=-1),this.moveY=t},isOnObject:function(){this.raycaster.ray.origin.copy(this.controls.getObject().position),this.raycaster.ray.origin.y-=10;var e=this.raycaster.intersectObjects(this.objects);return e.length>0},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},pointerlockchange:function(){document.pointerLockElement===this.element||document.mozPointerLockElement===this.element||document.webkitPointerLockElement===this.element?this.controls.enabled=!0:this.controls.enabled=!1},pointerlockerror:function(){},clickOnInstructions:function(){this.element.requestPointerLock=this.element.requestPointerLock||this.element.mozRequestPointerLock||this.element.webkitRequestPointerLock,/Firefox/i.test(navigator.userAgent)?(document.addEventListener("fullscreenchange",this.fullscreenchange,!1),document.addEventListener("mozfullscreenchange",this.fullscreenchange,!1),this.element.requestFullscreen=this.element.requestFullscreen||this.element.mozRequestFullscreen||this.element.mozRequestFullScreen||this.element.webkitRequestFullscreen,this.element.requestFullscreen()):this.element.requestPointerLock()},fullscreenchange:function(){document.fullscreenElement!==this.element&&document.mozFullscreenElement!==this.element&&document.mozFullScreenElement!==this.element||(document.removeEventListener("fullscreenchange",this.fullscreenchange),document.removeEventListener("mozfullscreenchange",this.fullscreenchange),this.element.requestPointerLock())},openFullscreen:function(){this.elem=document.getElementById("map"),this.elem=document.documentElement,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},playPause:function(){var e=this.$refs.audioElm;e.paused?e.play():e.pause()},cubeColorChange:function(){mouse.x=event.clientX/window.innerWidth*2-1,mouse.y=-event.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(mouse,this.camera);var e=raycaster.intersectObjects([this.cube]);console.log(e.length>0?"yes":"no"),e.length>0&&e[0].object.material.color.setHex(16777215*Math.random())}},computed:{controlsEnabled:function(){return void 0!==this.controls&&this.controls.enabled},zInput:function(){var e=0;return e-=this.moveForward?1:0,e+=this.moveBackward?1:0,e},xInput:function(){var e=0;return e-=this.moveLeft?1:0,e+=this.moveRight?1:0,e},moveObjectA:function(){(this.camera.position.z=30)&&(this.controls.getObject().position.y=y)}},mounted:function(){this.element=this.$refs.canvas,this.blocker=this.$refs.blocker,this.instructions=this.$refs.instructions;new h["d"];this.prevTime=performance.now(),this.velocity=new s["Vector3"],"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document?(document.addEventListener("pointerlockchange",this.pointerlockchange,!1),document.addEventListener("mozpointerlockchange",this.pointerlockchange,!1),document.addEventListener("webkitpointerlockchange",this.pointerlockchange,!1),document.addEventListener("pointerlockerror",this.pointerlockerror,!1),document.addEventListener("mozpointerlockerror",this.pointerlockerror,!1),document.addEventListener("webkitpointerlockerror",this.pointerlockerror,!1),this.init(),this.animate()):this.instructions.innerHTML="Your browser doesn't seem to support Pointer Lock API"}},z=F,j=(n("d914"),Object(E["a"])(z,o,i,!1,null,"2c3449f2",null));t["default"]=j.exports},"83a1":function(e,t,n){e.exports=function(e){var t=window.THREE||n("5a89"),o=this;e.rotation.set(0,0,0);var i=new t.Object3D;i.add(e);var s=new t.Object3D;s.position.y=10,s.add(i);var r=!1,a=!1,c=!1,l=!1,d=!1,u=!1,m=performance.now(),h=new t.Vector3,v=Math.PI/2,f=function(e){if(!1!==o.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;s.rotation.y-=.002*t,i.rotation.x-=.002*n,i.rotation.x=Math.max(-v,Math.min(v,i.rotation.x))}},p=function(e){switch(e.keyCode){case 38:case 87:r=!0;break;case 37:case 65:c=!0;break;case 40:case 83:a=!0;break;case 39:case 68:l=!0;break;case 32:!0===u&&(h.y+=350),u=!1;break}},g=function(e){switch(e.keyCode){case 38:case 87:r=!1;break;case 37:case 65:c=!1;break;case 40:case 83:a=!1;break;case 39:case 68:l=!1;break}};document.addEventListener("mousemove",f,!1),document.addEventListener("keydown",p,!1),document.addEventListener("keyup",g,!1),this.enabled=!1,this.getObject=function(){return s},this.isOnObject=function(e){d=e,u=e},this.getDirection=function(){var e=new t.Vector3(0,0,-1),n=new t.Euler(0,0,0,"YXZ");return function(t){return n.set(i.rotation.x,s.rotation.y,0),t.copy(e).applyEuler(n),t}}(),this.update=function(){if(!1!==o.enabled){var e=performance.now(),t=(e-m)/1e3;h.x-=10*h.x*t,h.z-=10*h.z*t,h.y-=9.8*100*t,r&&(h.z-=400*t),a&&(h.z+=400*t),c&&(h.x-=400*t),l&&(h.x+=400*t),!0===d&&(h.y=Math.max(0,h.y)),s.translateX(h.x*t),s.translateY(h.y*t),s.translateZ(h.z*t),s.position.y<10&&(h.y=0,s.position.y=10,u=!0),m=e}}}},a6a4:function(e,t,n){e.exports=n.p+"img/map.ddaaca10.svg"},ad78:function(e,t,n){e.exports=n.p+"img/lock.71a69ba2.svg"},b43b:function(e,t,n){e.exports=n.p+"img/minimize.f1a9c412.svg"},c2b0:function(e,t,n){e.exports=n.p+"img/lock.9fe83a15.png"},d914:function(e,t,n){"use strict";var o=n("7c8f"),i=n.n(o);i.a},edbb:function(e,t,n){}}]);
//# sourceMappingURL=chunk-dd76c558.7be758ef.js.map