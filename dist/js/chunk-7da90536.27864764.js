(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7da90536"],{"0c23":function(e,t,n){},"0d03":function(e,t,n){var i=n("6eeb"),s=Date.prototype,o="Invalid Date",a="toString",r=s[a],c=s.getTime;new Date(NaN)+""!=o&&i(s,a,(function(){var e=c.call(this);return e===e?r.call(this):o}))},"1ac9":function(e,t,n){e.exports=n.p+"img/fullscreen.8bc1ce14.svg"},"2d6f":function(e,t,n){"use strict";var i=n("0c23"),s=n.n(i);s.a},"4d38":function(e,t,n){e.exports=n.p+"img/speaker.46efd460.svg"},"6eba":function(e,t,n){var i=n("23e7");i({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},"7a82":function(e,t,n){var i=n("23e7"),s=n("83ab"),o=n("9bf2");i({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:o.f})},8363:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"play"},[e._m(0),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.controlsEnabled,expression:"!controlsEnabled"}],ref:"blocker",attrs:{id:"blocker"}},[i("div",{ref:"instructions",attrs:{id:"instructions"}},[i("span",[e._v("Escape Room")]),i("h4",[e._v("Menu")])]),i("div",{staticClass:"wrapper"},[i("div",{staticClass:"map"},[i("div",{staticClass:"btn-gradient"}),i("img",{attrs:{src:n("a6a4"),alt:"Map"}})]),i("div",{staticClass:"fullscreen"},[i("div",{staticClass:"btn-gradient"}),i("img",{attrs:{src:n("1ac9"),alt:"Fullscreen"}})]),i("div",{staticClass:"sound"},[i("div",{staticClass:"btn-gradient"}),i("img",{attrs:{src:n("4d38"),alt:"Sound"}})]),i("div",{staticClass:"lock"},[i("div",{staticClass:"btn-gradient"}),i("img",{attrs:{src:n("ad78"),alt:"Lock"}})])]),i("div",{staticClass:"start-button",on:{click:e.clickOnInstructions}},[i("div",{staticClass:"left-bracket"}),i("div",{staticClass:"start-button-label"},[e._v("CONTINUE")]),i("div",{staticClass:"right-bracket"}),i("div",{staticClass:"button-gradient"})])])]),i("div",{staticClass:"controls"},[i("button",{on:{click:function(t){return e.movePosition(5,5,0)}}},[e._v("Move a")]),i("button",{on:{click:function(t){return e.movePosition(5,15,0)}}},[e._v("Move b")]),i("button",{on:{click:function(t){return e.movePosition(15,5,0)}}},[e._v("Move c")])]),i("div",{ref:"canvas",staticClass:"container"},[e._m(1)])],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"loading-screen"}},[i("div",{attrs:{id:"loader"}}),i("div",{staticClass:"lock"},[i("img",{attrs:{src:n("c2b0"),alt:"lock"}}),i("h4",[e._v("Loading")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"center"},[n("div",{staticClass:"marker"}),n("div",{staticClass:"center-down"},[n("div",{staticClass:"mouse m-1"})])])}],o=(n("4160"),n("b0c0"),n("159b"),n("5a89")),a=n("83a1"),r=n.n(a);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n("7a82");function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var h=function(){function e(t,n,i){c(this,e),this.geometry=new o["BoxGeometry"](t,n,i),this.setVertexColors()}return d(e,[{key:"setVertexColors",value:function(){for(var e=0,t=this.geometry.faces.length;e<t;e++){var n=this.geometry.faces[e];n.vertexColors[0]=this.vertexColor(),n.vertexColors[1]=this.vertexColor(),n.vertexColors[2]=this.vertexColor()}return this}},{key:"vertexColor",value:function(){return(new o["Color"]).setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75)}},{key:"setMaterial",value:function(){return this.material=new o["MeshPhongMaterial"]({specular:16777215,flatShading:o["FlatShading"],vertexColors:o["VertexColors"]}),this.material.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75),this}},{key:"setMesh",value:function(){return this.mesh=new o["Mesh"](this.geometry,this.material),this}},{key:"setPosition",value:function(e,t,n){return this.mesh.position.x=e,this.mesh.position.y=t,this.mesh.position.z=n,this}},{key:"create",value:function(){return this.setMaterial(),this.setMesh(),this}}]),e}(),u=n("34ad"),m=(n("3191"),n("a5cf")),v=n("4476"),f=n("9ce6"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"new-message"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.addMessage(t)}}},[n("label",{attrs:{for:"new-message"}},[e._v("New Message (enter to add):")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",name:"new-message"},domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e.feedback?n("p",[e._v(e._s(e.feedback))]):e._e()])])},p=[],b=(n("6eba"),n("0d03"),n("032d")),w={name:"NewMessage",props:["name","jobs"],data:function(){return{newMessage:null,feedback:null}},methods:{addMessage:function(){this.newMessage?b["a"].collection("messages").add({content:this.newMessage,name:this.name,jobs:this.jobs,timestamp:Date.now()})["catch"]((function(e){console.log(e)})):this.feedback="You must enter a message in order to send one"}}},k=w,C=(n("2d6f"),n("2877")),E=Object(C["a"])(k,g,p,!1,null,"716f741a",null),L=E.exports,x=n("c1df"),M=n.n(x);n("facd");v["a"].registerPlugin(f["a"]);var z={name:"Play",props:["name","jobs"],components:{NewMessage:L},data:function(){return{messages:[],element:void 0,camera:void 0,scene:void 0,box:void 0,renderer:void 0,controls:void 0,objects:[],raycaster:void 0,blocker:void 0,instructions:void 0,havePointerLock:void 0,intersects:[],loadingScreen:void 0,loadingManager:null,moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,canJump:!1,sprinting:!1,moveY:0,prevTime:void 0,velocity:void 0}},created:function(){var e=this,t=b["a"].collection("messages").orderBy("timestamp");t.onSnapshot((function(t){t.docChanges().forEach((function(t){if("added"==t.type){var n=t.doc;e.messages.push({id:n.id,name:n.data().name,jobs:n.data().jobs,content:n.data().content,timestamp:M()(n.data().timestamp).format("ll")})}}))}))},methods:{init:function(){var e=this;this.camera=new o["PerspectiveCamera"](90,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,30,0),console.log(this.camera.position),this.scene=new o["Scene"],this.scene.fog=new o["Fog"](16777215,0,750);var t=new o["HemisphereLight"](15658751,7829384,.75);t.position.set(.5,1,.75),this.scene.add(t),this.controls=new r.a(this.camera),this.scene.add(this.controls.getObject()),document.addEventListener("wheel",this.onScrollWheel,!1),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1),this.raycaster=new o["Raycaster"](new o["Vector3"],new o["Vector3"](0,-1,0),0,10),this.loadingManager=new o["LoadingManager"]((function(){e.loadingScreen=document.getElementById("loading-screen"),e.loadingScreen.classList.add("fade-out"),e.loadingScreen.addEventListener("transitionend",e.onTransitionEnd)})),this.initCreateGround(),this.initCreateHouse(),this.initCube(),this.initRenderer(),window.addEventListener("resize",this.onWindowResize,!1)},initRenderer:function(){this.renderer=new o["WebGLRenderer"],this.renderer.gammaOutput=!0,this.renderer.gammaFactor=2.2,this.renderer.setClearColor(1381653),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.element.appendChild(this.renderer.domElement)},initCreateGround:function(){var e=this,t=new u["a"](this.loadingManager);t.load("/blender/grond.glb",(function(t){e.scene.add(t.scene),t.scene.position.set(0,0,-100),t.scene.scale.set(10,10,10)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))},initCreateHouse:function(){var e=this,t=new u["a"](this.loadingManager);t.load("/blender/room.glb",(function(t){e.scene.add(t.scene),t.scene.position.set(0,15,0),t.scene.scale.set(8,8,8)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))},initCube:function(){var e=this.scene.getObjectByName("Cube");e=new h(20,20,20).create().setPosition(10,10,10);var t=e.mesh;this.scene.add(t),this.objects.push(t)},animate:function(){if(requestAnimationFrame(this.animate),this.controlsEnabled){var e=performance.now(),t=(e-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*t,this.velocity.z-=10*this.velocity.z*t,this.velocity.y-=9.8*100*t,this.handleInput(t),this.controls.getObject().position.y<10&&(this.velocity.y=0,this.controls.getObject().position.y=10,this.canJump=!0),this.prevTime=e}this.renderer.render(this.scene,this.camera)},onTransitionEnd:function(e){e.target.remove()},handleInput:function(e){this.velocity.z+=10*this.moveY*e,this.controls.getObject().position.z+=this.velocity.z*e,this.moveY=0},movePosition:function(e,t,n){this.controls.getObject().position.x=e,this.controls.getObject().position.y=t,this.controls.getObject().position.z=n},onKeyDown:function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 32:!0===this.canJump&&(this.velocity.y+=350),this.canJump=!1;break;case 16:this.sprinting=!0;break}},onKeyUp:function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 16:this.sprinting=!1;break}},onScrollWheel:function(e){var t=e.deltaY;t>0&&(this.moveY=1),t<0&&(this.moveY=-1),this.moveY=t},isOnObject:function(){this.raycaster.ray.origin.copy(this.controls.getObject().position),this.raycaster.ray.origin.y-=10;var e=this.raycaster.intersectObjects(this.objects);return e.length>0},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},pointerlockchange:function(){document.pointerLockElement===this.element||document.mozPointerLockElement===this.element||document.webkitPointerLockElement===this.element?this.controls.enabled=!0:this.controls.enabled=!1},pointerlockerror:function(){},clickOnInstructions:function(){this.element.requestPointerLock=this.element.requestPointerLock||this.element.mozRequestPointerLock||this.element.webkitRequestPointerLock,/Firefox/i.test(navigator.userAgent)?(document.addEventListener("fullscreenchange",this.fullscreenchange,!1),document.addEventListener("mozfullscreenchange",this.fullscreenchange,!1),this.element.requestFullscreen=this.element.requestFullscreen||this.element.mozRequestFullscreen||this.element.mozRequestFullScreen||this.element.webkitRequestFullscreen,this.element.requestFullscreen()):this.element.requestPointerLock()},fullscreenchange:function(){document.fullscreenElement!==this.element&&document.mozFullscreenElement!==this.element&&document.mozFullScreenElement!==this.element||(document.removeEventListener("fullscreenchange",this.fullscreenchange),document.removeEventListener("mozfullscreenchange",this.fullscreenchange),this.element.requestPointerLock())}},computed:{controlsEnabled:function(){return void 0!==this.controls&&this.controls.enabled},zInput:function(){var e=0;return e-=this.moveForward?1:0,e+=this.moveBackward?1:0,e},xInput:function(){var e=0;return e-=this.moveLeft?1:0,e+=this.moveRight?1:0,e},moveObjectA:function(){(this.camera.position.z=30)&&(this.controls.getObject().position.y=y)}},mounted:function(){this.element=this.$refs.canvas,this.blocker=this.$refs.blocker,this.instructions=this.$refs.instructions;new m["d"];this.prevTime=performance.now(),this.velocity=new o["Vector3"],"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document?(document.addEventListener("pointerlockchange",this.pointerlockchange,!1),document.addEventListener("mozpointerlockchange",this.pointerlockchange,!1),document.addEventListener("webkitpointerlockchange",this.pointerlockchange,!1),document.addEventListener("pointerlockerror",this.pointerlockerror,!1),document.addEventListener("mozpointerlockerror",this.pointerlockerror,!1),document.addEventListener("webkitpointerlockerror",this.pointerlockerror,!1),this.init(),this.animate()):this.instructions.innerHTML="Your browser doesn't seem to support Pointer Lock API"}},j=z,P=(n("c52c"),Object(C["a"])(j,i,s,!1,null,"2f1e652b",null));t["default"]=P.exports},"83a1":function(e,t,n){e.exports=function(e){var t=window.THREE||n("5a89"),i=this;e.rotation.set(0,0,0);var s=new t.Object3D;s.add(e);var o=new t.Object3D;o.position.y=10,o.add(s);var a=!1,r=!1,c=!1,l=!1,d=!1,h=!1,u=performance.now(),m=new t.Vector3,v=Math.PI/2,f=function(e){if(!1!==i.enabled){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;o.rotation.y-=.002*t,s.rotation.x-=.002*n,s.rotation.x=Math.max(-v,Math.min(v,s.rotation.x))}},g=function(e){switch(e.keyCode){case 38:case 87:a=!0;break;case 37:case 65:c=!0;break;case 40:case 83:r=!0;break;case 39:case 68:l=!0;break;case 32:!0===h&&(m.y+=350),h=!1;break}},p=function(e){switch(e.keyCode){case 38:case 87:a=!1;break;case 37:case 65:c=!1;break;case 40:case 83:r=!1;break;case 39:case 68:l=!1;break}};document.addEventListener("mousemove",f,!1),document.addEventListener("keydown",g,!1),document.addEventListener("keyup",p,!1),this.enabled=!1,this.getObject=function(){return o},this.isOnObject=function(e){d=e,h=e},this.getDirection=function(){var e=new t.Vector3(0,0,-1),n=new t.Euler(0,0,0,"YXZ");return function(t){return n.set(s.rotation.x,o.rotation.y,0),t.copy(e).applyEuler(n),t}}(),this.update=function(){if(!1!==i.enabled){var e=performance.now(),t=(e-u)/1e3;m.x-=10*m.x*t,m.z-=10*m.z*t,m.y-=9.8*100*t,a&&(m.z-=400*t),r&&(m.z+=400*t),c&&(m.x-=400*t),l&&(m.x+=400*t),!0===d&&(m.y=Math.max(0,m.y)),o.translateX(m.x*t),o.translateY(m.y*t),o.translateZ(m.z*t),o.position.y<10&&(m.y=0,o.position.y=10,h=!0),u=e}}}},a6a4:function(e,t,n){e.exports=n.p+"img/map.ec9dc948.svg"},ad78:function(e,t,n){e.exports=n.p+"img/lock.ae7ad660.svg"},c2b0:function(e,t,n){e.exports=n.p+"img/lock.9fe83a15.png"},c52c:function(e,t,n){"use strict";var i=n("e3d3"),s=n.n(i);s.a},e3d3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-7da90536.27864764.js.map